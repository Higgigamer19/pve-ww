# This file is autogenerated by warewulf
rootfs / tmpfs defaults 0 0
devpts /dev/pts devpts gid=5,mode=620 0 0
tmpfs /run/shm tmpfs defaults 0 0
sysfs /sys sysfs defaults 0 0
proc /proc proc defaults 0 0
{{- if .FileSystems }}
# mounts for local file systems created with ignition in nodes.conf
# all with noauto as mounts happens with systemd units
{{- range $fsdevice,$fs := .FileSystems }}
{{ $fsdevice }} {{ $fs.Path }} {{ $fs.Format }}
{{- if $fs.MountOptions }} noauto{{range $index,$opt := $fs.MountOptions }},{{ $opt }}{{ end }} 0 0
{{- else }} noauto,defaults 0 0
{{- end }}{{ end }}{{ end }}
{{- with $fstab := index .Resources "fstab" }}
{{- range $entry := $fstab }}
{{ index $entry "spec" }} {{ index $entry "file" }} {{ default "nfs" (index $entry "vfstype") }} {{ default "defaults" (index $entry "mntops") }} {{ default 0 (index $entry "freq") }} {{ default 0 (index $entry "passno") }}
{{- end }}{{ end }}

# base node state mount
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}} /mnt nfs defaults 0 0

# etc mounts
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}}/etc/network		/etc/network		nfs	defaults	0 0
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}}/etc/pam.d		/etc/pam.d		nfs	defaults	0 0
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}}/etc/multipath		/etc/multipath		nfs	defaults	0 0
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}}/etc/ssh		/etc/ssh		nfs	defaults	0 0
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}}/etc/corosync		/etc/corosync		nfs	defaults	0 0
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}}/etc/iproute2		/etc/iproute2		nfs	defaults	0 0
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}}/etc/apt		/etc/apt		nfs	defaults	0 0

# var/lib mounts
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}}/var/lib/ceph		/var/lib/ceph		nfs	defaults	0 0
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}}/var/lib/corosync	/var/lib/corosync	nfs	defaults	0 0
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}}/var/lib/lxc		/var/lib/lxc		nfs	defaults	0 0
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}}/var/lib/pve-cluster	/var/lib/pve-cluster	nfs	defaults	0 0
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}}/var/lib/pve-firewall	/var/lib/pve-firewall	nfs	defaults	0 0
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}}/var/lib/pve-manager	/var/lib/pve-manager	nfs	defaults	0 0
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}}/var/lib/qemu-server	/var/lib/qemu-server	nfs	defaults	0 0
192.168.1.50:/mnt/homebase/pve-node-states/{{$.Id}}/var/lib/rrdcached	/var/lib/rrdcached	nfs	defaults	0 0

